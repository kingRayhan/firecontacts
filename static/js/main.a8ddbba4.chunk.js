(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{121:function(e,t,a){e.exports=a(289)},289:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(36),o=(a(126),a(128),a(17)),l=a(28),s=a(27),i=a(26),u=a.n(i),m=a(60),p=a.n(m);a(182),a(186);p.a.initializeApp({apiKey:"AIzaSyBGc4rk9kavNhiyyO3y8BfZfPaBDnogQSc",authDomain:"firecontacts-b29e1.firebaseapp.com",databaseURL:"https://firecontacts-b29e1.firebaseio.com",projectId:"firecontacts-b29e1",storageBucket:"firecontacts-b29e1.appspot.com",messagingSenderId:"792701271286"});var d=p.a.auth(),h=p.a.firestore(),f=[],b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"ADD_CONTACT":return[n].concat(Object(s.a)(e));case"REMOVE_CONTACT":var r=Object(s.a)(e),c=r.findIndex(function(e){return e.id===n});return r.splice(c,1),r;case"EDIT_CONTACT":var o=Object(s.a)(e),l=o.findIndex(function(e){return e.id===n.id});return o[l]=n.newData,o;case"SET_CONTACTS":return n;default:return e}},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"ADD_BOOKMARK":var r=Object(s.a)(e);if(r.filter(function(e){return e.id===n.id}).length){var c=r.findIndex(function(e){return e.id===n.id});return r.splice(c,1),r}return[n].concat(Object(s.a)(e));case"REMOVE_BOOKMARK":var o=Object(s.a)(e),l=o.findIndex(function(e){return e.id===n});return o.splice(l,1),o;default:return e}},g=a(20),O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!1},t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"LOADING_STATE":return Object(g.a)({},e,{loading:n});default:return e}},v=function(e){return{type:"LOADING_STATE",payload:e}},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoggedin:!1,user:null},t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"AUTH_SETUSER":return n;default:return e}},j=function(){return function(e){e(v(!0)),d.onAuthStateChanged(function(t){t?h.collection("users").doc(t.uid).get().then(function(a){e(v(!1)),e({type:"SET_CONTACTS",payload:a.data().contacts||[]}),e({type:"AUTH_SETUSER",payload:{isLoggedin:!0,userId:t.uid,user:a.data().profile}})}):(e(v(!1)),e({type:"AUTH_SETUSER",payload:{isLoggedin:!1,user:null}}))})}},k=Object(l.c)({contacts:b,bookmarks:E,auth:y,meta:O}),C=a(118),S=Object(l.e)(k,Object(l.d)(l.a.apply(void 0,[C.a]))),_=a(14),w=a(15),T=a(18),A=a(16),N=a(19),I=a(197),L=a(49),x=a(292),D=a(290),B=a(291),R=a(293),M=a(294),U=a(295),K=a(296),H=a(297),P=a(298),F=a(317),z=a(299),V=a(300),G=a(301),J=function(e){function t(e){var a;return Object(_.a)(this,t),(a=Object(T.a)(this,Object(A.a)(t).call(this,e))).logout=function(){a.props.authLogout(),localStorage.removeItem("auth_userId")},a.toggle=a.toggle.bind(Object(L.a)(Object(L.a)(a))),a.state={isOpen:!1},a}return Object(N.a)(t,e),Object(w.a)(t,[{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(D.a,{color:"danger",dark:!0,expand:"md"},r.a.createElement(B.a,{tag:x.a,to:"/"},"Phonebook App"),r.a.createElement(R.a,{onClick:this.toggle}),this.props.auth.isLoggedin?r.a.createElement(M.a,{isOpen:this.state.isOpen,navbar:!0},r.a.createElement(U.a,{className:"ml-auto",navbar:!0},r.a.createElement(K.a,null,r.a.createElement(H.a,{tag:x.a,to:"/"},"Home")),r.a.createElement(K.a,null,r.a.createElement(H.a,{tag:x.a,to:"/add"},"New Contact")),r.a.createElement(K.a,null,r.a.createElement(H.a,{tag:x.a,to:"/bookmarks"},"Bookmarks",0!==this.props.bookmarks.length&&r.a.createElement(P.a,{className:"ml-1"},this.props.bookmarks.length))),r.a.createElement(F.a,{nav:!0,inNavbar:!0},r.a.createElement(z.a,{nav:!0,caret:!0},"Hello, ",this.props.auth.user.first_name),r.a.createElement(V.a,{right:!0},r.a.createElement(G.a,null,"settings"),r.a.createElement(G.a,{divider:!0}),r.a.createElement(G.a,{onClick:this.logout},"Logout"))))):r.a.createElement(M.a,{isOpen:this.state.isOpen,navbar:!0},r.a.createElement(U.a,{className:"ml-auto",navbar:!0},r.a.createElement(K.a,null,r.a.createElement(H.a,{tag:x.a,to:"/login"},"Login")),r.a.createElement(K.a,null,r.a.createElement(H.a,{tag:x.a,to:"/register"},"Register"))))))}}]),t}(r.a.Component),W=Object(o.b)(function(e){return{auth:e.auth,bookmarks:e.bookmarks}},{authLogout:function(){return function(e){d.signOut().then(function(t){e({type:"AUTH_SETUSER",payload:{isLoggedin:!1,user:null}})})}}})(J),q=a(302),Q=a(303),Z=a(304),X=function(e){function t(){return Object(_.a)(this,t),Object(T.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(W,null),r.a.createElement(q.a,{className:"py-5"},r.a.createElement(Q.a,null,r.a.createElement(Z.a,{sm:8,className:"mx-auto"},this.props.children))))}}]),t}(r.a.Component),Y=a(305),$=a(306),ee=a(307),te=a(308),ae=a(309),ne=a(194),re=function(e){return{type:"REMOVE_BOOKMARK",payload:e}},ce=a(195),oe=function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(T.a)(this,(e=Object(A.a)(t)).call.apply(e,[this].concat(r)))).state={searchTerm:""},a.isBookmarked=function(e){return!!a.props.bookmarks.find(function(t){return t.id===e})},a.removeContact=function(e){window.confirm("Sure to delete?")&&(a.props.removeContact(e.id),a.props.removeFromBookmark(e.id))},a.search=function(e){a.setState({searchTerm:e.target.value})},a}return Object(N.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){var e=this;return this.props.meta.loading?r.a.createElement(X,null,r.a.createElement("div",{className:"text-center"},r.a.createElement(ce.BarLoader,{sizeUnit:"px",size:500,color:"#123abc"}))):0===this.props.contacts.length?r.a.createElement(X,null,r.a.createElement("h1",{className:"text-muted"},"No saved contact in phonebook")):r.a.createElement(X,null,r.a.createElement("div",null,r.a.createElement(Y.a,{onChange:this.search,placeholder:"Search by Name / Email / phonenumber"})),this.props.contacts.filter(function(t){return t.name.toLowerCase().includes(e.state.searchTerm.toLowerCase())||t.email.toLowerCase().includes(e.state.searchTerm.toLowerCase())||t.phone.toLowerCase().includes(e.state.searchTerm.toLowerCase())}).map(function(t){return r.a.createElement($.a,{className:"my-3",key:t.id},r.a.createElement(ee.a,null,t.name),r.a.createElement(te.a,null,r.a.createElement("p",null,"Name: ",t.name),r.a.createElement("p",null,"Email: ",t.email),r.a.createElement("p",null,"Phone: ",t.phone)),r.a.createElement(ae.a,null,r.a.createElement(ne.a,{color:e.isBookmarked(t.id)?"primary":"secondary",onClick:function(){return e.props.addToBookMark(t)}},r.a.createElement("i",{className:"fa fa-heart"})),r.a.createElement(ne.a,{color:"danger",className:"ml-2",onClick:function(){return e.removeContact(t)}},r.a.createElement("i",{className:"fa fa-times"}))))}))}}]),t}(n.Component),le=Object(o.b)(function(e){return Object(g.a)({},e)},{removeContact:function(e){return function(t){var a=localStorage.getItem("auth_userId");h.collection("users").doc(a).get().then(function(n){var r=n.data().contacts,c=r.findIndex(function(t){return t.id===e});r.splice(c,1),h.collection("users").doc(a).update({contacts:r}).then(function(a){u.a.success("Successfully Deleted!!"),t({type:"REMOVE_CONTACT",payload:e})})})}},addToBookMark:function(e){return{type:"ADD_BOOKMARK",payload:e}},removeFromBookmark:re})(oe),se=a(83),ie=a.n(se),ue=a(196),me=a(310),pe=a(311),de=a(84),he=a(85),fe=function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(T.a)(this,(e=Object(A.a)(t)).call.apply(e,[this].concat(r)))).state={contact:{name:"",email:"",phone:""},errors:{}},a.onSubmit=function(){var e=Object(ue.a)(ie.a.mark(function e(t){var n;return ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n={},Object.keys(a.state.contact).map(function(e){if(Object(he.isEmpty)(a.state.contact[e]))return n[e]="".concat(e," can't be empty");"email"===e&&!Object(he.isEmail)(a.state.contact[e])&&(n[e]="".concat(e," is not a valid email address"))}),a.setState({errors:n}),0===Object.keys(n).length&&(a.props.addContact(Object(g.a)({id:Object(de.v4)()},a.state.contact)),a.props.saveContact(Object(g.a)({id:Object(de.v4)()},a.state.contact),a.props.auth.userId),a.props.history.push("/"));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.onChange=function(e){var t=Object(g.a)({},a.state.contact);t[e.target.name]=e.target.value,a.setState({contact:t})},a}return Object(N.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(X,null,r.a.createElement("div",{className:"py-3"},r.a.createElement("h2",{className:"text-uppercase"},"Add new contact")),r.a.createElement("form",{onSubmit:this.onSubmit},Object.keys(this.state.contact).map(function(t){return r.a.createElement(me.a,{key:t},r.a.createElement(Y.a,{onChange:e.onChange,placeholder:t,type:"text",name:t,invalid:!(!Object.keys(e.state.errors).length||!e.state.errors[t])}),e.state.errors[t]&&r.a.createElement(pe.a,null,e.state.errors[t]))}),r.a.createElement(ne.a,{color:"danger"},"Save")))}}]),t}(n.Component),be=Object(o.b)(function(e){return Object(g.a)({},e)},{addContact:function(e){return{type:"ADD_CONTACT",payload:Object(g.a)({},e)}},saveContact:function(e){return function(t){var a=localStorage.getItem("auth_userId");h.collection("users").doc(a).get().then(function(t){var n=void 0!==t.data().contacts?Object(s.a)(t.data().contacts):[];n.push(e),h.collection("users").doc(a).update({contacts:n}).then(function(e){u.a.success("Successfully Saved!!")})})}}})(fe),Ee=a(42),ge=function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(T.a)(this,(e=Object(A.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:""},a.onChange=function(e){a.setState(Object(Ee.a)({},e.target.name,e.target.value))},a.onSubmit=function(e){e.preventDefault(),d.signInWithEmailAndPassword(a.state.email,a.state.password).then(function(e){localStorage.setItem("auth_userId",e.user.uid),a.props.history.push("/")}).catch(function(e){return u.a.error(e.message)})},a}return Object(N.a)(t,e),Object(w.a)(t,[{key:"componentDidMount",value:function(){null!==localStorage.getItem("auth_userId")&&this.props.history.push("/")}},{key:"render",value:function(){var e=this;return r.a.createElement(X,null,r.a.createElement($.a,null,r.a.createElement(ee.a,null,"Login"),r.a.createElement(te.a,null,r.a.createElement("form",{onSubmit:this.onSubmit},Object.keys(this.state).map(function(t){return r.a.createElement(me.a,{key:t},r.a.createElement(Y.a,{placeholder:t,value:e.state[t],name:t,onChange:e.onChange,type:"password"===t?t:"email"}))}),r.a.createElement(me.a,null,r.a.createElement(ne.a,{color:"danger"},"Register"))))))}}]),t}(n.Component),Oe=Object(o.b)(null,{authSetuser:j})(ge),ve=a(312),ye=function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(T.a)(this,(e=Object(A.a)(t)).call.apply(e,[this].concat(r)))).state={first_name:"",last_name:"",facebook_profile_url:"",email:"",password:""},a.onChange=function(e){a.setState(Object(Ee.a)({},e.target.name,e.target.value))},a.onSubmit=function(e){e.preventDefault();var t=a.state,n=t.first_name,r=t.last_name,c=t.facebook_profile_url,o=t.email,l=t.password;d.createUserWithEmailAndPassword(o,l).then(function(e){localStorage.setItem("auth_userId",e.user.uid),h.collection("users").doc(e.user.uid).set({profile:{first_name:n,last_name:r,facebook_profile_url:c,email:o}}).then(function(e){a.props.history.push("/"),u.a.success("Registration successfully")})}).catch(function(e){return u.a.error(e.message)})},a}return Object(N.a)(t,e),Object(w.a)(t,[{key:"componentDidMount",value:function(){null!==localStorage.getItem("auth_userId")&&this.props.history.push("/")}},{key:"render",value:function(){var e=this;return r.a.createElement(X,null,r.a.createElement($.a,null,r.a.createElement(ee.a,null,"Register"),r.a.createElement(te.a,null,r.a.createElement("form",{onSubmit:this.onSubmit},Object.keys(this.state).map(function(t){return r.a.createElement(me.a,{key:t},r.a.createElement(ve.a,{for:t},t),r.a.createElement(Y.a,{id:t,placeholder:t,value:e.state[t],name:t,onChange:e.onChange,type:"password"===t||"email"===t?t:"facebook_profile_url"===t?"url":"text"}))}),r.a.createElement(me.a,null,r.a.createElement(ne.a,{color:"danger"},"Register"))))))}}]),t}(n.Component),je=Object(o.b)(null)(ye),ke=function(e){function t(){return Object(_.a)(this,t),Object(T.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(X,null,r.a.createElement("h1",null,"Bookmarks"),r.a.createElement("h3",null,"Total bookmarks: ",this.props.bookmarks.length),this.props.bookmarks.map(function(t){return r.a.createElement($.a,{className:"my-3",key:t.id},r.a.createElement(ee.a,null,t.name),r.a.createElement(te.a,null,r.a.createElement("p",null,"Name: ",t.name),r.a.createElement("p",null,"Email: ",t.email),r.a.createElement("p",null,"Phone: ",t.phone)),r.a.createElement(ae.a,null,r.a.createElement(ne.a,{color:"danger",onClick:function(){return window.confirm("Sure to delete?")&&e.props.removeFromBookmark(t.id)}},r.a.createElement("i",{className:"fa fa-times"}))))}))}}]),t}(n.Component),Ce=Object(o.b)(function(e){return Object(g.a)({},e)},{removeFromBookmark:re})(ke),Se=a(315),_e=a(313),we=a(314),Te=a(316),Ae=function(e){var t=e.component,a=(e.isLoggedin,Object(I.a)(e,["component","isLoggedin"]));return r.a.createElement(Se.a,Object.assign({},a,{render:function(e){return null!==localStorage.getItem("auth_userId")?r.a.createElement(t,e):r.a.createElement(_e.a,{to:"/login"})}}))},Ne=function(e){function t(){return Object(_.a)(this,t),Object(T.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){return r.a.createElement(we.a,null,r.a.createElement(Te.a,null,r.a.createElement(Ae,{exact:!0,path:"/",component:le}),r.a.createElement(Ae,{exact:!0,path:"/add",component:be}),r.a.createElement(Ae,{exact:!0,path:"/bookmarks",component:Ce}),r.a.createElement(Se.a,{exact:!0,path:"/login",component:Oe}),r.a.createElement(Se.a,{exact:!0,path:"/register",component:je})))}}]),t}(n.Component),Ie=Object(o.b)(function(e){return Object(g.a)({},e)})(Ne);S.dispatch(j()),Object(c.render)(r.a.createElement(o.a,{store:S},r.a.createElement(Ie,null)),document.querySelector("#root"))}},[[121,2,1]]]);
//# sourceMappingURL=main.a8ddbba4.chunk.js.map